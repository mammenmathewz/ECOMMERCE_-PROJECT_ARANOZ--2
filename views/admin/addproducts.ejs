<%- include('../partials/adminHead') %>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.js" integrity="sha512-9KkIqdfN7ipEW6B6k+Aq20PV31bjODg4AA52W+tYtAE0jE0kMx49bjJ3FgvS56wzmyfMUHbQ4Km2b7l9+Y/+Eg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.css" integrity="sha512-bs9fAcCAeaDfA4A+NiShWR886eClUcBtqhipoY5DM60Y1V3BbVQlabthUBal5bq8Z8nnxxiyb1wfGX2n76N1Mw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.js" integrity="sha512-Zt7blzhYHCLHjU0c+e4ldn5kGAbwLKTSOTERgqSNyTB50wWSI21z0q6bn/dEIuqf6HiFzKJ6cfj2osRhklb4Og==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.1/cropper.min.css" integrity="sha512-hvNR0F/e2J7zPPfLC9auFe3/SE0yG4aJCOd/qxew74NN7eyiSKjr7xJJMu1Jy2wf7FXITpWS1E/RY8yzuXN7VA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<body>
    <div class="container-xxl position-relative bg-white d-flex p-0">
        <!-- Spinner Start -->
        <%- include('../partials/adminspinner') %>

        <!-- Spinner End -->


        <!-- Sidebar Start -->
        <%- include('../partials/adminsidebar') %>

        <!-- Sidebar End -->


        <!-- Content Start -->
        <div class="content">
            <!-- Navbar Start -->
    <%- include('../partials/adminnavbar') %>
          
            <!-- Navbar End -->


            <!-- Form Start -->
            <div class="container-fluid pt-4 px-4">
                <div class="row g-4">
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-light rounded h-100 p-4">
                            <h6 class="mb-4">Add Product</h6>
                            
                              
                            <form action="/admin/uploadeproduct" method="post" onsubmit="checkForm(event)" enctype="multipart/form-data">
                                <div class="mb-3">
                                    <label for="brand" class="form-label">Brand</label>
                                    <select id="brand" name="brand" class="form-select mb-3" required>
                                        <% brands.forEach(function(brand) { %>
                                            <option value="<%= brand._id %>"><%= brand.name %></option>
                                        <% }); %>
                                     </select>
                                </div>
                                <div class="mb-3">
                                    <label for="productName" class="form-label">Product Name</label>
                                    <input id="productName" name="productname" class="form-control mb-3" type="text" placeholder="" aria-label="default input example" required>
                                </div>
                                <div class="form-floating">
                                    <textarea class="form-control" name="description" placeholder="Details" id="floatingTextarea" style="height: 150px;"></textarea>
                                    <label for="floatingTextarea">Product description</label>
                                </div>
                                <div>
                                    <select class="form-select mb-3" name="category" style="margin-top: 3%;" aria-label=".form-select-lg example" required>
                                        <option value="Mens">Mens</option>
                                        <option value="Womens">Womens</option>
                                        <option value="Unisex">Unisex</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="regularPrice" class="form-label">Regular Price</label>
                                    <input id="regularPrice" name="regularprice" class="form-control mb-3" type="number" placeholder="" aria-label="default input example" required>
                                </div>
                                <div class="mb-3">
                                    <label for="offerPrice" class="form-label">Offer Price</label>
                                    <input id="offerPrice" name="saleprice" class="form-control mb-3" type="number" placeholder="" aria-label="default input example" required>
                                </div>
                                <div class="mb-3">
                                    <label for="offerPrice" class="form-label">Number of items</label>
                                    <input id="offerPrice" name="number" class="form-control mb-3" type="number" placeholder="" aria-label="default input example" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="formImage" class="form-label">Images</label>
                                    <input class="form-control" type="file" id="formImage" name="images" multiple required>
                                    
                                </div>
                                                         
                                <button type="submit" class="btn btn-primary">Submit</button>
                            </form>
                            
                        </div>
                    </div>
                   
                    
                    <div class="col-sm-12 col-xl-6">
                        <div class="bg-light rounded h-100 p-4">
                            <h6 class="mb-4">Add Product</h6>
                            <div>
                                <img src="" id="croppedImage" alt="">
                            </div>
                            <div>
                                <button id="cropBtn">crop image</button>
                            </div>
                        </div>
                    </div>
                    
                    
                   
                    
                </div>
            </div>
            <!-- Form End -->

            
           
 
           
            
            <!-- Footer Start -->
            <div class="container-fluid pt-4 px-4">
                <div class="bg-light rounded-top p-4">
                    <div class="row">
                        <div class="col-12 col-sm-6 text-center text-sm-start">
                            &copy; <a href="#">Your Site Name</a>, All Right Reserved. 
                        </div>
                        <div class="col-12 col-sm-6 text-center text-sm-end">
                            <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
                            Designed By <a href="https://htmlcodex.com">HTML Codex</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Footer End -->
        </div>
        <!-- Content End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/chart/chart.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/tempusdominus/js/moment.min.js"></script>
    <script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>





    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    <script>
        function checkForm(e) {
          let inputs = document.getElementsByTagName('input');
          for(let i=0; i<inputs.length; i++) {
            if (!inputs[i].value.trim()) {
              e.preventDefault();
              alert('Please fill out the form completely');
              return;
            }
          }
        }

    
        </script>
        <script>
            setTimeout(function() {
              document.getElementById('message').style.display = 'none';
            }, 2000);
          </script>

<script>

document.addEventListener('DOMContentLoaded',()=>{
    let cropper;

const ourImage = document.getElementById('formImage');
const cropimage = document.getElementById('croppedImage');
const cropBtn = document.getElementById('cropBtn');

ourImage.addEventListener("change",(e)=>{
    const file = event.target.files[0];

    if (file) {
        const reader = new FileReader();
        reader.onload=(e)=>{
            cropimage.src = e.target.result;
            cropper = new Cropper(cropimage,{
                aspectRatio:1,
                viewMode:1
            });
        }
        reader.readAsDataURL(file);
    }
});

cropBtn.addEventListener('click',()=>{
    if (cropper) {
        const croppedDataUrl = cropper.getCroppedCanvas().toDataURL();
        cropimage.src = croppedDataUrl;
    } else {
        console.error('Cropper is not defined. Make sure an image is loaded before clicking the crop button.');
    }
});
})


</script>

</body>


</html>